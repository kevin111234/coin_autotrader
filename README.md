# coin_autotrader
암호화폐 자동투자 프로그램

### 1. **프로젝트 개요**

* **목표**:

  * 거래소의 실시간 가격 데이터(OCHL)를 기반으로 보편적이고 기술적 지표 위주의 매매 전략을 적용하여 고수익률을 목표로 하는 자동 매매 프로그램 제작.
  * 단기 변동성이 큰 암호화폐 시장 특성을 반영해, 빠른 매매 판단과 즉각적인 포지션 관리(TP/SL)를 수행.
* **특징**:

  * **데이터 기반 의사결정** (기본적 분석 배제, 기술적 분석 100%)
  * **경량 구조** (데이터베이스 없이도 동작 가능, 필요 시 확장)
  * **즉시성** (1초 단위 판단, Slack 실시간 보고)
  * **안전장치** (TP/SL 자동 적용, 주문 실패 시 재시도)

---

### 2. **사용 기술**

* **언어**: Python 3.x
* **API**:

  * Binance API (가격 데이터, 주문 실행)
  * Slack API (실시간 보고 및 알림)
* **데이터 수집**:

  * Binance WebSocket (실시간 Ticker & OCHL 데이터)
  * 필요 시 웹 크롤링으로 외부 시세·뉴스 참고
* **데이터 저장(옵션)**:

  * MySQL (거래 기록/백테스트용 데이터 저장)
  * Redis (실시간 캐싱, 매매 상태 저장)
* **기타**:

  * Pandas, Numpy (데이터 처리)
  * TA-Lib / pandas\_ta (기술적 지표 계산)

---

### 3. **매매 전략 (기본 구조)**

* **기술적 지표 후보**:

  * 추세: EMA(20, 60, 120), MACD, RSI
  * 변동성: ATR, Bollinger Bands
  * 거래량: OBV, VWAP
* **매매 규칙 예시**:

  1. **매수 조건**: EMA20 > EMA60 > EMA120 & RSI > 50 & MACD 상향 돌파
  2. **매도 조건**: EMA20 < EMA60 or MACD 하향 돌파
  3. **포지션 관리**:

     * 진입 시 TP: +X%
     * SL: -Y%
     * 포지션 당 리스크: 총자산 대비 Z%
* **전략 확장**:

  * 복수 타임프레임 신호 확인 (1분봉 + 5분봉)
  * 전략 모듈화로 교체/추가 가능

---

### 4. **프로그램 아키텍처**

```
main.py (프로그램 실행 진입점)
│
├── config/ (API 키, 전략 파라미터)
│   ├── settings.py
│
├── data/
│   ├── fetcher.py   (Binance WebSocket 실시간 데이터 수집)
│   ├── indicators.py (기술적 지표 계산)
│
├── strategy/
│   ├── base_strategy.py (전략 인터페이스)
│   ├── default_strategy.py (EMA+MACD+RSI 조합 예시)
│
├── trade/
│   ├── executor.py  (주문 실행, TP/SL 관리)
│   ├── portfolio.py (보유 자산 추적)
│
├── report/
│   ├── slack_reporter.py (Slack API로 상황 보고)
│
└── utils/
    ├── logger.py (로그 관리)
    ├── helper.py (공용 함수)
```

---

### 5. **프로그램 동작 흐름**

1. **초기 세팅**

   * API Key/Secret 로드
   * 거래 대상 종목 및 전략 파라미터 설정
   * 초기 데이터 로드(OCHL, 보유 자산)
   * Slack 시작 알림
2. **메인 루프 (1초 단위)**

   * 실시간 가격 & OCHL 데이터 업데이트
   * 전략 실행 → 매수/매도 신호 판단
   * 주문 실행(성공 시 TP/SL 주문 자동 생성)
   * 주문 실패 시 재시도 로직
3. **정기 보고 (30분 단위)**

   * 현재 잔고, 수익률, 포지션 상태 Slack 전송
4. **종료**

   * 최종 보고 & 로그 저장

---

### 6. **예상 리스크 & 대응 방안**

| 리스크                        | 대응                    |
| ---------------------------- | --------------------- |
| Binance API Rate Limit 초과  | WebSocket 사용 + 요청 최소화 |
| 주문 실패                     | 잔고 확인, 가격 재계산 후 재시도   |
| 네트워크 장애                 | 로컬 상태 저장 후 재연결 시 복원   |
| 잘못된 신호                   | 전략 다중화, 필터링 로직 추가     |
| 과최적화 위험                 | 백테스트/실거래 병행 검증        |

---

### 7. **개발 단계 로드맵**

1. **1단계**: 기본 틀 제작

   * Binance WebSocket → 실시간 가격 수집
   * Slack API → 알림 기능
2. **2단계**: 매매 로직 구현

   * 기술적 지표 계산 모듈
   * 매수/매도 판단 & 주문 실행
3. **3단계**: 포지션 관리

   * TP/SL 자동 주문
   * 잔고 & 수익률 관리
4. **4단계**: 안정화 & 최적화

   * 예외 처리, 재시도 로직
   * 전략 파라미터 튜닝
5. **5단계**: 백테스트 모듈 추가

   * 동일 전략 과거 데이터 검증

---

### 8. **향후 확장**

* 강화학습 기반 전략 교체
* 멀티코인 자동 매매
* 포트폴리오 분산 전략
* 클라우드 서버 상시 가동 (AWS/Linode)
